# ç¯å¢ƒè¦æ±‚ä¸ä¾èµ–è¯´æ˜

æœ¬æ–‡æ¡£è¯´æ˜KamaitachiGoé¡¹ç›®çš„è¿è¡Œç¯å¢ƒã€ä¾èµ–ç®¡ç†å’Œæ„å»ºæ–¹æ³•ã€‚

---

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

### 1. æ“ä½œç³»ç»Ÿ
- Windows 10/11 (å·²æµ‹è¯•) âœ…
- Linux (ç†è®ºæ”¯æŒ)
- macOS (ç†è®ºæ”¯æŒ)

### 2. Goè¯­è¨€ç¯å¢ƒ
- **Goç‰ˆæœ¬**: 1.21 æˆ–æ›´é«˜
- **æ¨èç‰ˆæœ¬**: Go 1.24+
- **Toolchain**: go1.24.5

#### æ£€æŸ¥Goç‰ˆæœ¬
```powershell
go version
```

#### ä¸‹è½½Go
å¦‚æœæœªå®‰è£…Goæˆ–ç‰ˆæœ¬è¿‡ä½ï¼Œè¯·è®¿é—®ï¼šhttps://golang.org/dl/

### 3. å¤–éƒ¨æœåŠ¡

#### etcd (å¿…éœ€)
- **ç”¨é€”**: æœåŠ¡æ³¨å†Œä¸å‘ç°
- **ç‰ˆæœ¬**: 3.5+
- **ç«¯å£**: 2379 (å®¢æˆ·ç«¯), 2380 (å¯¹ç­‰é€šä¿¡)

**ä¸‹è½½åœ°å€**: https://github.com/etcd-io/etcd/releases

**éªŒè¯etcdè¿è¡Œ**:
```powershell
curl http://localhost:2379/version
```

è¯¦ç»†å®‰è£…æ­¥éª¤è¯·å‚è§ä¸‹æ–¹ [å¤–éƒ¨æœåŠ¡å®‰è£…æŒ‡å—](#å¤–éƒ¨æœåŠ¡å®‰è£…æŒ‡å—)

---

## ğŸ“¦ é¡¹ç›®ä¾èµ–

### æ ¸å¿ƒä¾èµ– (ç›´æ¥ä¾èµ–)

é¡¹ç›®ä½¿ç”¨Go Modulesç®¡ç†ä¾èµ–ï¼Œæ‰€æœ‰ä¾èµ–å®šä¹‰åœ¨`go.mod`æ–‡ä»¶ä¸­ã€‚

| åŒ…å | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| `github.com/gin-gonic/gin` | v1.9.1 | Webæ¡†æ¶ - HTTPè·¯ç”±å’Œä¸­é—´ä»¶ |
| `github.com/go-ini/ini` | v1.67.0 | é…ç½®æ–‡ä»¶è§£æ |
| `github.com/sirupsen/logrus` | v1.9.3 | æ—¥å¿—åº“ |
| `go.etcd.io/etcd/client/v3` | v3.5.10 | etcdå®¢æˆ·ç«¯ - æœåŠ¡å‘ç° |
| `golang.org/x/time` | v0.5.0 | é™æµå™¨ - Token Bucket |
| `modernc.org/sqlite` | v1.39.1 | SQLiteæ•°æ®åº“ (çº¯Goå®ç°) |
| `github.com/json-iterator/go` | v1.1.12 | é«˜æ€§èƒ½JSONåºåˆ—åŒ– |

### é—´æ¥ä¾èµ– (è‡ªåŠ¨ç®¡ç†)

Go Modulesä¼šè‡ªåŠ¨ç®¡ç†æ‰€æœ‰é—´æ¥ä¾èµ–ï¼Œè¯¦è§`go.sum`æ–‡ä»¶ã€‚

---

## ğŸŒ å¤–éƒ¨æœåŠ¡å®‰è£…æŒ‡å—

### etcd å®‰è£…ä¸é…ç½®ï¼ˆå¿…éœ€ï¼‰

etcdæ˜¯åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ç³»ç»Ÿï¼Œç”¨äºæœåŠ¡æ³¨å†Œä¸å‘ç°ã€‚

#### Windows å®‰è£…æ­¥éª¤

**1. ä¸‹è½½etcd**

è®¿é—®å®˜æ–¹GitHubå‘å¸ƒé¡µé¢ï¼šhttps://github.com/etcd-io/etcd/releases

ä¸‹è½½Windowsç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼š`etcd-v3.5.10-windows-amd64.zip`

**2. è§£å‹å®‰è£…**

```powershell
# è§£å‹åˆ°æŒ‡å®šç›®å½•ï¼ˆä¾‹å¦‚ C:\etcdï¼‰
Expand-Archive -Path etcd-v3.5.10-windows-amd64.zip -DestinationPath C:\etcd

# è¿›å…¥ç›®å½•
cd C:\etcd\etcd-v3.5.10-windows-amd64
```

**3. å¯åŠ¨etcd**

```powershell
# æ–¹æ³•1ï¼šç›´æ¥å¯åŠ¨ï¼ˆé»˜è®¤é…ç½®ï¼‰
.\etcd.exe

# æ–¹æ³•2ï¼šæŒ‡å®šæ•°æ®ç›®å½•å¯åŠ¨
.\etcd.exe --data-dir=C:\etcd\data

# æ–¹æ³•3ï¼šåå°å¯åŠ¨ï¼ˆæ¨èï¼‰
Start-Process -FilePath ".\etcd.exe" -ArgumentList "--data-dir=C:\etcd\data" -WindowStyle Hidden
```

**4. éªŒè¯å®‰è£…**

```powershell
# æ£€æŸ¥ç‰ˆæœ¬
curl http://localhost:2379/version

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://localhost:2379/health

# é¢„æœŸè¾“å‡ºï¼š{"health":"true"}
```

**5. è®¾ç½®å¼€æœºè‡ªå¯ï¼ˆå¯é€‰ï¼‰**

åˆ›å»ºWindowsæœåŠ¡æˆ–æ·»åŠ åˆ°å¯åŠ¨é¡¹ï¼š

```powershell
# åˆ›å»ºå¯åŠ¨è„šæœ¬ï¼šC:\etcd\start_etcd.bat
@echo off
cd C:\etcd\etcd-v3.5.10-windows-amd64
start /B etcd.exe --data-dir=C:\etcd\data

# å°†æ­¤æ‰¹å¤„ç†æ–‡ä»¶æ·»åŠ åˆ°å¯åŠ¨æ–‡ä»¶å¤¹
# Win+R è¾“å…¥ shell:startup æ‰“å¼€å¯åŠ¨æ–‡ä»¶å¤¹ï¼Œæ”¾å…¥å¿«æ·æ–¹å¼
```

#### Linux å®‰è£…æ­¥éª¤

```bash
# 1. ä¸‹è½½
wget https://github.com/etcd-io/etcd/releases/download/v3.5.10/etcd-v3.5.10-linux-amd64.tar.gz

# 2. è§£å‹
tar -xzf etcd-v3.5.10-linux-amd64.tar.gz

# 3. ç§»åŠ¨åˆ°ç³»ç»Ÿè·¯å¾„
sudo mv etcd-v3.5.10-linux-amd64/etcd* /usr/local/bin/

# 4. å¯åŠ¨
etcd --data-dir=/var/lib/etcd

# 5. éªŒè¯
curl http://localhost:2379/version
```

#### etcd é…ç½®è¯´æ˜

**é»˜è®¤ç«¯å£**ï¼š
- `2379`: å®¢æˆ·ç«¯é€šä¿¡ç«¯å£ï¼ˆé¡¹ç›®ä½¿ç”¨æ­¤ç«¯å£ï¼‰
- `2380`: å¯¹ç­‰é€šä¿¡ç«¯å£ï¼ˆé›†ç¾¤å†…éƒ¨ä½¿ç”¨ï¼‰

**å¸¸ç”¨é…ç½®å‚æ•°**ï¼š

```powershell
# æŒ‡å®šç›‘å¬åœ°å€
.\etcd.exe --listen-client-urls=http://0.0.0.0:2379 `
           --advertise-client-urls=http://localhost:2379

# æŒ‡å®šæ•°æ®ç›®å½•
.\etcd.exe --data-dir=D:\etcd_data

# å¯ç”¨æ—¥å¿—
.\etcd.exe --log-outputs=stdout --log-level=info
```

**é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­çš„etcdåœ°å€**ï¼š

åœ¨ `conf/master.ini` å’Œ `conf/slave*.ini` ä¸­ï¼š
```ini
[etcd]
endpoints = 127.0.0.1:2379
dial_timeout = 5
```

#### etcd ç®¡ç†å‘½ä»¤

```powershell
# æŸ¥çœ‹æ‰€æœ‰é”®
etcdctl get --prefix ""

# æŸ¥çœ‹æœåŠ¡æ³¨å†Œä¿¡æ¯ï¼ˆé¡¹ç›®è¿è¡Œåï¼‰
etcdctl get --prefix "/services/"

# åˆ é™¤æ‰€æœ‰æœåŠ¡ä¿¡æ¯ï¼ˆæ¸…ç†ç”¨ï¼‰
etcdctl del --prefix "/services/"

# æŸ¥çœ‹etcdæˆå‘˜
etcdctl member list
```

#### etcd æ•…éšœæ’æŸ¥

**é—®é¢˜1ï¼šç«¯å£è¢«å ç”¨**

```powershell
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -ano | findstr "2379"

# æ€æ­»å ç”¨è¿›ç¨‹
taskkill /PID <è¿›ç¨‹ID> /F
```

**é—®é¢˜2ï¼šæ•°æ®æŸå**

```powershell
# åœæ­¢etcd
Get-Process etcd | Stop-Process -Force

# åˆ é™¤æ•°æ®ç›®å½•
Remove-Item -Recurse -Force C:\etcd\data

# é‡æ–°å¯åŠ¨
.\etcd.exe --data-dir=C:\etcd\data
```

**é—®é¢˜3ï¼šæ— æ³•è¿æ¥**

```powershell
# æ£€æŸ¥é˜²ç«å¢™
# Windowsé˜²ç«å¢™ -> é«˜çº§è®¾ç½® -> å…¥ç«™è§„åˆ™ -> æ–°å»ºè§„åˆ™
# å…è®¸ç«¯å£ 2379 å’Œ 2380

# æˆ–ä¸´æ—¶å…³é—­é˜²ç«å¢™æµ‹è¯•
Set-NetFirewallProfile -Profile Domain,Public,Private -Enabled False
```

---

### SQLite è¯´æ˜ï¼ˆæ— éœ€å®‰è£…ï¼‰

æœ¬é¡¹ç›®ä½¿ç”¨ `modernc.org/sqlite`ï¼Œè¿™æ˜¯SQLiteçš„**çº¯Goå®ç°**ã€‚

**ä¼˜åŠ¿**ï¼š
- âœ… æ— éœ€å®‰è£…SQLite
- âœ… æ— éœ€CGOç¼–è¯‘ç¯å¢ƒ
- âœ… ç¼–è¯‘åçš„ç¨‹åºå®Œå…¨ç‹¬ç«‹
- âœ… è·¨å¹³å°å…¼å®¹

**æ•°æ®æ–‡ä»¶**ï¼š
- ä½ç½®ï¼š`data/master.db`, `data/slave1.db`, `data/slave2.db`
- æ ¼å¼ï¼šSQLite3æ•°æ®åº“æ–‡ä»¶
- è‡ªåŠ¨åˆ›å»ºï¼šé¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»º

**æŸ¥çœ‹æ•°æ®åº“å†…å®¹ï¼ˆå¯é€‰å·¥å…·ï¼‰**ï¼š

1. **VS Code DuckDBæ‰©å±•**ï¼ˆä½ å·²æœ‰ï¼‰
   - å¯ä»¥æ‰“å¼€SQLiteæ–‡ä»¶æŸ¥çœ‹

2. **SQLite Browser**
   - ä¸‹è½½ï¼šhttps://sqlitebrowser.org/
   - å…è´¹ã€å¼€æºã€è·¨å¹³å°

3. **å‘½ä»¤è¡Œå·¥å…·**ï¼ˆå¦‚æœéœ€è¦ï¼‰
   ```powershell
   # ä½¿ç”¨é¡¹ç›®è‡ªå¸¦çš„æ£€æŸ¥å·¥å…·
   go run .\tools\check_db.go
   ```

**æ•°æ®å¯¼å…¥**ï¼š

```powershell
# ä»SQLæ–‡ä»¶å¯¼å…¥æ•°æ®
go run .\cmd\import\import_sql.go `
    -sql="f10sql\finance_quarter_stock_benefit.sql" `
    -db="data\master.db"
```

---

### å¯é€‰æœåŠ¡å’Œå·¥å…·

#### 1. PowerShell 7+ï¼ˆæ¨èå‡çº§ï¼‰

é¡¹ç›®æµ‹è¯•è„šæœ¬ä½¿ç”¨PowerShellï¼Œæ¨èä½¿ç”¨PowerShell 7ï¼š

```powershell
# ä¸‹è½½åœ°å€
https://github.com/PowerShell/PowerShell/releases

# å®‰è£…åéªŒè¯
pwsh --version
```

#### 2. Gitï¼ˆç‰ˆæœ¬æ§åˆ¶ï¼‰

```powershell
# ä¸‹è½½åœ°å€
https://git-scm.com/downloads

# éªŒè¯
git --version
```

#### 3. Postman / Insomniaï¼ˆAPIæµ‹è¯•ï¼‰

ç”¨äºæ‰‹åŠ¨æµ‹è¯•APIæ¥å£ï¼š
- Postman: https://www.postman.com/downloads/
- Insomnia: https://insomnia.rest/download

#### 4. æ€§èƒ½ç›‘æ§å·¥å…·

**Windowsæ€§èƒ½ç›‘è§†å™¨**ï¼ˆå·²å†…ç½®ï¼‰ï¼š
```powershell
# æ‰“å¼€ä»»åŠ¡ç®¡ç†å™¨
taskmgr

# æ‰“å¼€èµ„æºç›‘è§†å™¨
resmon
```

**è¿›ç¨‹ç›‘æ§**ï¼š
```powershell
# æŸ¥çœ‹èŠ‚ç‚¹è¿›ç¨‹
Get-Process | Where-Object {$_.Name -match "master|slave"}

# ç›‘æ§èµ„æºä½¿ç”¨
Get-Process master,slave | Select-Object Name,CPU,WS,PM
```

---

### å¿«é€ŸéªŒè¯æ‰€æœ‰ç¯å¢ƒ

è¿è¡Œä»¥ä¸‹è„šæœ¬éªŒè¯æ‰€æœ‰ç¯å¢ƒæ˜¯å¦å°±ç»ªï¼š

```powershell
Write-Host "========== Environment Check ==========" -ForegroundColor Cyan

# 1. æ£€æŸ¥Go
Write-Host "`n[1] Go Version:" -ForegroundColor Yellow
go version

# 2. æ£€æŸ¥etcd
Write-Host "`n[2] etcd Status:" -ForegroundColor Yellow
try {
    $response = curl http://localhost:2379/version 2>&1
    Write-Host "etcd is running!" -ForegroundColor Green
    $response
} catch {
    Write-Host "etcd is NOT running!" -ForegroundColor Red
    Write-Host "Please start etcd first." -ForegroundColor Red
}

# 3. æ£€æŸ¥é¡¹ç›®ä¾èµ–
Write-Host "`n[3] Go Dependencies:" -ForegroundColor Yellow
cd D:\data\1028\KamaitachiGo
go mod verify

# 4. æ£€æŸ¥ç¼–è¯‘æ–‡ä»¶
Write-Host "`n[4] Compiled Binaries:" -ForegroundColor Yellow
if (Test-Path "bin\master.exe") {
    Write-Host "master.exe: OK" -ForegroundColor Green
} else {
    Write-Host "master.exe: NOT FOUND" -ForegroundColor Red
}

if (Test-Path "bin\slave.exe") {
    Write-Host "slave.exe: OK" -ForegroundColor Green
} else {
    Write-Host "slave.exe: NOT FOUND" -ForegroundColor Red
}

if (Test-Path "bin\benchmark.exe") {
    Write-Host "benchmark.exe: OK" -ForegroundColor Green
} else {
    Write-Host "benchmark.exe: NOT FOUND" -ForegroundColor Red
}

# 5. æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶
Write-Host "`n[5] Database Files:" -ForegroundColor Yellow
Get-ChildItem data\*.db | ForEach-Object {
    Write-Host "$($_.Name): $([math]::Round($_.Length/1MB, 2)) MB" -ForegroundColor Green
}

Write-Host "`n========== Check Complete ==========" -ForegroundColor Cyan
```

å°†ä¸Šè¿°è„šæœ¬ä¿å­˜ä¸º `check_environment.ps1`ï¼Œè¿è¡Œå³å¯ä¸€é”®æ£€æŸ¥æ‰€æœ‰ç¯å¢ƒã€‚

---

## ğŸ”§ ä¾èµ–å®‰è£…

### æ–¹æ³•1ï¼šè‡ªåŠ¨å®‰è£…ï¼ˆæ¨èï¼‰

```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd D:\data\1028\KamaitachiGo

# ä¸‹è½½æ‰€æœ‰ä¾èµ–ï¼ˆè‡ªåŠ¨æ ¹æ®go.modï¼‰
go mod download

# æˆ–è€…ç›´æ¥æ„å»ºï¼ˆä¼šè‡ªåŠ¨ä¸‹è½½ä¾èµ–ï¼‰
go build .\cmd\master\main.go
```

### æ–¹æ³•2ï¼šæ‰‹åŠ¨éªŒè¯ä¾èµ–

```powershell
# éªŒè¯ä¾èµ–å®Œæ•´æ€§
go mod verify

# æ¸…ç†æœªä½¿ç”¨çš„ä¾èµ–
go mod tidy

# æŸ¥çœ‹ä¾èµ–æ ‘
go mod graph
```

### é…ç½®Goä»£ç†ï¼ˆå¯é€‰ï¼ŒåŠ é€Ÿä¸‹è½½ï¼‰

å¦‚æœä¸‹è½½ä¾èµ–é€Ÿåº¦æ…¢ï¼Œå¯ä»¥é…ç½®å›½å†…ä»£ç†ï¼š

```powershell
# è®¾ç½®Goä»£ç†
go env -w GOPROXY=https://goproxy.cn,direct

# æˆ–ä½¿ç”¨é˜¿é‡Œäº‘ä»£ç†
go env -w GOPROXY=https://mirrors.aliyun.com/goproxy/,direct
```

---

## ğŸ—ï¸ å®Œæ•´æ„å»ºæµç¨‹

### ä»é›¶å¼€å§‹æ„å»ºé¡¹ç›®

```powershell
# 1. å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®
cd D:\data\1028\KamaitachiGo

# 2. éªŒè¯Goç¯å¢ƒ
go version

# 3. ä¸‹è½½ä¾èµ–
go mod download

# 4. ç¼–è¯‘æ‰€æœ‰ç»„ä»¶
# ç¼–è¯‘MasterèŠ‚ç‚¹
go build -o bin\master.exe .\cmd\master\main.go

# ç¼–è¯‘SlaveèŠ‚ç‚¹
go build -o bin\slave.exe .\cmd\slave\main.go

# ç¼–è¯‘å•èŠ‚ç‚¹Server
go build -o bin\server.exe .\cmd\server\main.go

# ç¼–è¯‘å‹æµ‹å·¥å…·
go build -o bin\benchmark.exe .\tools\benchmark.go
go build -o bin\benchmark_scenarios.exe .\tools\benchmark_scenarios.go

# ç¼–è¯‘æ•°æ®åº“æ£€æŸ¥å·¥å…·
go build -o bin\check_db.exe .\tools\check_db.go

# 5. éªŒè¯ç¼–è¯‘ç»“æœ
dir bin\*.exe
```

---

## ğŸ“ é¡¹ç›®ç»“æ„è¯´æ˜

```
KamaitachiGo/
â”œâ”€â”€ go.mod                  # Goæ¨¡å—å®šä¹‰æ–‡ä»¶ï¼ˆç±»ä¼¼requirements.txtï¼‰
â”œâ”€â”€ go.sum                  # ä¾èµ–æ ¡éªŒå’Œæ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ bin/                    # ç¼–è¯‘åçš„å¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ cmd/                    # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ master/            # MasterèŠ‚ç‚¹
â”‚   â”œâ”€â”€ slave/             # SlaveèŠ‚ç‚¹
â”‚   â”œâ”€â”€ server/            # å•èŠ‚ç‚¹æœåŠ¡
â”‚   â””â”€â”€ import/            # SQLå¯¼å…¥å·¥å…·
â”œâ”€â”€ internal/               # å†…éƒ¨ä»£ç ï¼ˆä¸å¯¹å¤–æš´éœ²ï¼‰
â”‚   â”œâ”€â”€ cache/             # LRUç¼“å­˜å®ç°
â”‚   â”œâ”€â”€ handler/           # HTTPå¤„ç†å™¨
â”‚   â”œâ”€â”€ middleware/        # ä¸­é—´ä»¶ï¼ˆé™æµã€ç†”æ–­ï¼‰
â”‚   â”œâ”€â”€ model/             # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ repository/        # æ•°æ®è®¿é—®å±‚
â”‚   â””â”€â”€ service/           # ä¸šåŠ¡é€»è¾‘å±‚
â”œâ”€â”€ pkg/                    # å…¬å…±åº“ï¼ˆå¯å¯¹å¤–æš´éœ²ï¼‰
â”‚   â””â”€â”€ json/              # JSONå·¥å…·ï¼ˆjsoniterå°è£…ï¼‰
â”œâ”€â”€ conf/                   # é…ç½®æ–‡ä»¶
â”œâ”€â”€ data/                   # æ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶
â””â”€â”€ tools/                  # å·¥å…·ç¨‹åº
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¡®è®¤ç¯å¢ƒ

```powershell
# æ£€æŸ¥Goç‰ˆæœ¬
go version

# æ£€æŸ¥etcd
curl http://localhost:2379/version

# éªŒè¯ä¾èµ–
go mod verify
```

### 2. æ„å»ºé¡¹ç›®

```powershell
# ç¼–è¯‘æ‰€æœ‰å¿…è¦ç»„ä»¶
go build -o bin\master.exe .\cmd\master\main.go
go build -o bin\slave.exe .\cmd\slave\main.go
go build -o bin\benchmark.exe .\tools\benchmark.go
```

### 3. å¯åŠ¨é›†ç¾¤

```powershell
# ä½¿ç”¨è„šæœ¬å¯åŠ¨3èŠ‚ç‚¹é›†ç¾¤
.\start_3nodes.ps1

# ç­‰å¾…å¯åŠ¨å®Œæˆ
Start-Sleep -Seconds 10
```

### 4. éªŒè¯è¿è¡Œ

```powershell
# æµ‹è¯•å¥åº·æ£€æŸ¥
curl http://localhost:8080/health
curl http://localhost:8081/health
curl http://localhost:8082/health
```

### 5. è¿è¡Œæµ‹è¯•

```powershell
# è¿è¡Œå‹æµ‹
.\bin\benchmark.exe -requests 5000 -concurrent 50 -nodes 3
```

---

## ğŸ” ä¾èµ–è¯´æ˜è¯¦è§£

### 1. Webæ¡†æ¶ - Gin

```go
github.com/gin-gonic/gin v1.9.1
```

**ç”¨é€”**: 
- HTTPè·¯ç”±
- ä¸­é—´ä»¶æ”¯æŒ
- è¯·æ±‚/å“åº”å¤„ç†

**ä¸ºä»€ä¹ˆé€‰æ‹©Gin**:
- æ€§èƒ½ä¼˜ç§€ï¼ˆåŸºäºhttprouterï¼‰
- è½»é‡çº§
- ä¸­é—´ä»¶ç”Ÿæ€ä¸°å¯Œ

### 2. æ•°æ®åº“ - SQLite (çº¯Go)

```go
modernc.org/sqlite v1.39.1
```

**ç”¨é€”**: 
- å­˜å‚¨è´¢åŠ¡æ•°æ®
- æ¯ä¸ªèŠ‚ç‚¹ç‹¬ç«‹æ•°æ®åº“

**ä¸ºä»€ä¹ˆé€‰æ‹©modernc.org/sqlite**:
- çº¯Goå®ç°ï¼Œæ— éœ€CGO
- è·¨å¹³å°ï¼Œæ˜“éƒ¨ç½²
- æ— éœ€é¢å¤–æ•°æ®åº“æœåŠ¡

### 3. æœåŠ¡å‘ç° - etcd Client

```go
go.etcd.io/etcd/client/v3 v3.5.10
```

**ç”¨é€”**: 
- èŠ‚ç‚¹æ³¨å†Œ
- æœåŠ¡å‘ç°
- åˆ†å¸ƒå¼åè°ƒ

### 4. é™æµ - Token Bucket

```go
golang.org/x/time v0.5.0
```

**ç”¨é€”**: 
- å®ç°Token Bucketé™æµç®—æ³•
- QPSæ§åˆ¶

### 5. JSONä¼˜åŒ– - jsoniter

```go
github.com/json-iterator/go v1.1.12
```

**ç”¨é€”**: 
- é«˜æ€§èƒ½JSONåºåˆ—åŒ–/ååºåˆ—åŒ–
- æ¯”æ ‡å‡†åº“å¿«2-3å€

**ä½¿ç”¨æ–¹å¼**:
é¡¹ç›®é€šè¿‡`pkg/json`å°è£…ï¼Œç»Ÿä¸€ä½¿ç”¨jsoniter:
```go
import "KamaitachiGo/pkg/json"

data, _ := json.Marshal(obj)
json.Unmarshal(data, &obj)
```

---

## ğŸ› ï¸ å¼€å‘å·¥å…·

### æ¨èçš„å¼€å‘å·¥å…·

1. **IDE**: 
   - VS Code + Goæ‰©å±• (æ¨è)
   - GoLand

2. **è°ƒè¯•å·¥å…·**:
   - Delve (Goè°ƒè¯•å™¨)
   ```powershell
   go install github.com/go-delve/delve/cmd/dlv@latest
   ```

3. **ä»£ç æ ¼å¼åŒ–**:
   ```powershell
   # æ ¼å¼åŒ–ä»£ç 
   go fmt ./...
   
   # ä»£ç æ£€æŸ¥
   go vet ./...
   ```

4. **æ€§èƒ½åˆ†æ**:
   ```powershell
   # ç”Ÿæˆæ€§èƒ½åˆ†æ
   go test -cpuprofile=cpu.prof -memprofile=mem.prof -bench .
   ```

---

## ğŸ“Œ ä¾èµ–æ›´æ–°

### æ›´æ–°æ‰€æœ‰ä¾èµ–åˆ°æœ€æ–°ç‰ˆæœ¬

```powershell
# æŸ¥çœ‹å¯æ›´æ–°çš„ä¾èµ–
go list -u -m all

# æ›´æ–°æŒ‡å®šä¾èµ–
go get -u github.com/gin-gonic/gin

# æ›´æ–°æ‰€æœ‰ä¾èµ–ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
go get -u ./...

# æ›´æ–°åæ¸…ç†
go mod tidy
```

### å›ºå®šä¾èµ–ç‰ˆæœ¬ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰

å½“å‰`go.mod`ä¸­çš„ç‰ˆæœ¬éƒ½æ˜¯ç»è¿‡æµ‹è¯•çš„ç¨³å®šç‰ˆæœ¬ï¼Œ**ä¸å»ºè®®éšæ„æ›´æ–°**ã€‚

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: ä¾èµ–ä¸‹è½½å¤±è´¥

**é—®é¢˜**: `go: github.com/xxx: connection refused`

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# æ–¹æ¡ˆ1ï¼šé…ç½®ä»£ç†
go env -w GOPROXY=https://goproxy.cn,direct

# æ–¹æ¡ˆ2ï¼šä½¿ç”¨VPN

# æ–¹æ¡ˆ3ï¼šæ‰‹åŠ¨ä¸‹è½½ä¾èµ–åŒ…
go mod download
```

### Q2: ç¼–è¯‘é”™è¯¯ - æ‰¾ä¸åˆ°åŒ…

**é—®é¢˜**: `package xxx is not in GOROOT`

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# 1. æ¸…ç†æ¨¡å—ç¼“å­˜
go clean -modcache

# 2. é‡æ–°ä¸‹è½½ä¾èµ–
go mod download

# 3. éªŒè¯go.mod
go mod verify

# 4. é‡æ–°ç¼–è¯‘
go build .\cmd\master\main.go
```

### Q3: CGOç›¸å…³é”™è¯¯

**é—®é¢˜**: `cgo: exec gcc: not found`

**è¯´æ˜**: 
æœ¬é¡¹ç›®ç‰¹æ„é€‰æ‹©äº†çº¯Goä¾èµ–ï¼ˆå¦‚`modernc.org/sqlite`ï¼‰ï¼Œ**ä¸éœ€è¦CGO**ã€‚

å¦‚æœé‡åˆ°CGOé”™è¯¯ï¼Œå¯ä»¥æ˜¾å¼ç¦ç”¨ï¼š
```powershell
$env:CGO_ENABLED=0
go build .\cmd\master\main.go
```

### Q4: ç‰ˆæœ¬ä¸å…¼å®¹

**é—®é¢˜**: `go.mod requires go >= 1.24`

**è§£å†³æ–¹æ¡ˆ**:
```powershell
# æ–¹æ¡ˆ1ï¼šå‡çº§Goç‰ˆæœ¬ï¼ˆæ¨èï¼‰
# ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼šhttps://golang.org/dl/

# æ–¹æ¡ˆ2ï¼šé™ä½é¡¹ç›®è¦æ±‚çš„Goç‰ˆæœ¬ï¼ˆä¸æ¨èï¼‰
# ä¿®æ”¹go.modç¬¬ä¸€è¡Œï¼šgo 1.21
```

---

## ğŸ“Š ä¾èµ–åˆ†æ

### æŸ¥çœ‹ä¾èµ–å¤§å°

```powershell
# æŸ¥çœ‹ç¼–è¯‘åçš„äºŒè¿›åˆ¶å¤§å°
dir bin\*.exe | Select-Object Name, Length

# æŸ¥çœ‹ä¾èµ–å…³ç³»
go mod graph | findstr "github.com/gin-gonic/gin"
```

### ä¾èµ–å¯è§†åŒ–

```powershell
# å®‰è£…ä¾èµ–å¯è§†åŒ–å·¥å…·
go install golang.org/x/exp/cmd/modgraphviz@latest

# ç”Ÿæˆä¾èµ–å›¾
go mod graph | modgraphviz | dot -Tpng -o dependencies.png
```

---

## âœ… æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰æ£€æŸ¥ï¼š
- [ ] Goç‰ˆæœ¬ >= 1.21
- [ ] etcdæœåŠ¡è¿è¡Œä¸­
- [ ] æ‰€æœ‰ä¾èµ–ä¸‹è½½å®Œæˆ (`go mod download`)
- [ ] ä¾èµ–éªŒè¯é€šè¿‡ (`go mod verify`)
- [ ] æ‰€æœ‰ç»„ä»¶ç¼–è¯‘æˆåŠŸ
- [ ] é…ç½®æ–‡ä»¶æ­£ç¡® (`conf/*.ini`)
- [ ] æ•°æ®åº“æ–‡ä»¶å­˜åœ¨ (`data/*.db`)

---

## ğŸ“ ä¸Pythonçš„å¯¹æ¯”

| ç‰¹æ€§ | Python | Go |
|------|--------|-----|
| ä¾èµ–æ–‡ä»¶ | requirements.txt | go.mod + go.sum |
| åŒ…ç®¡ç†å™¨ | pip | go get / go mod |
| è™šæ‹Ÿç¯å¢ƒ | venv/virtualenv | ä¸éœ€è¦ï¼ˆæ¨¡å—éš”ç¦»ï¼‰ |
| ä¾èµ–å®‰è£… | `pip install -r requirements.txt` | `go mod download` |
| é”å®šç‰ˆæœ¬ | requirements.txt | go.sum |
| æ„å»ºäº§ç‰© | .pyæ–‡ä»¶ï¼ˆéœ€Pythonï¼‰ | .exeå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆç‹¬ç«‹ï¼‰ |

**Goçš„ä¼˜åŠ¿**:
1. **å•æ–‡ä»¶éƒ¨ç½²**: ç¼–è¯‘åæ˜¯ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ— éœ€å®‰è£…Goç¯å¢ƒ
2. **è‡ªåŠ¨ä¾èµ–ç®¡ç†**: go.modè‡ªåŠ¨ç®¡ç†ä¾èµ–å…³ç³»
3. **ä¾èµ–æ ¡éªŒ**: go.sumç¡®ä¿ä¾èµ–å®Œæ•´æ€§
4. **è·¨å¹³å°ç¼–è¯‘**: å¯äº¤å‰ç¼–è¯‘åˆ°ä¸åŒå¹³å°

---

## ğŸ¯ æ€»ç»“

æœ¬é¡¹ç›®ä½¿ç”¨Go Modulesè¿›è¡Œä¾èµ–ç®¡ç†ï¼Œæ ¸å¿ƒä¾èµ–åŒ…æ‹¬ï¼š

1. **Gin** - Webæ¡†æ¶
2. **SQLite** - åµŒå…¥å¼æ•°æ®åº“ï¼ˆçº¯Goï¼‰
3. **etcd client** - æœåŠ¡å‘ç°
4. **jsoniter** - é«˜æ€§èƒ½JSON
5. **golang.org/x/time** - é™æµå™¨

æ‰€æœ‰ä¾èµ–éƒ½æ˜¯çº¯Goå®ç°ï¼Œæ— éœ€CGOï¼Œç¡®ä¿è·¨å¹³å°å…¼å®¹æ€§å’Œæ˜“éƒ¨ç½²æ€§ã€‚

---

**æœ€åæ›´æ–°**: 2025-10-24  
**Goç‰ˆæœ¬**: 1.24+  
**ä¾èµ–åŒ…æ•°é‡**: 7ä¸ªç›´æ¥ä¾èµ–ï¼Œ60+ä¸ªé—´æ¥ä¾èµ–

